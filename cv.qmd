---
title: Lorenzo Fabbri
format:
  pdf:
    include-in-header:
      - partials/header.tex
    documentclass: article
bibliography: bibliography.bib
csl: ama11.csl
execute:
  echo: false
editor_options:
  chunk_output_type: console
---

```{r}
cvevents <- function(tbl, what, when, where, details) {
  command_start <- "\\cvevent"
  res <- paste0(
    command_start,
    "{", tbl[[when]], "}",
    "{", tbl[[what]], "}",
    "{", tbl[[where]], "}"
  )
  
  tbl[[details]] <- sapply(
    tbl[[details]], function(x) {
      paste0("{", x, "}", collapse = ",")
    }
  )
  res <- paste0(res, "{", tbl[[details]], "}")
  
  cat(res, sep = "\n")
}

cvshortevents <- function(tbl, what, when, where) {
  command_start <- "\\cvshortevent"
  res <- paste0(
    command_start,
    "{", tbl[[when]], "}",
    "{", tbl[[what]], "}",
    "{", tbl[[where]], "}"
  )
  
  cat(res, sep = "\n")
}
```

```{r}
my_orcid <- "0000-0003-3031-322X"
my_googlescholar <- "QbPv1H0AAAAJ"
```

# Summary

I am a PhD student at the Barcelona Institute for Global Health (ISGlobal).
I work under the supervision of Prof. [Martine Vrijheid](https://www.isglobal.org/en/our-team/-/profiles/18514).
My main topic of interest is the use of modern Causal Inference methods to answer questions in the broad field of Environmental Neuroepidemiology.
I am also profoundly interested in Open Science and Reproducible Research.

I received my Bachelor’s degree in Biotechnology and my Master’s degree in Quantitative and Computational Biology.

My personal webpage is [here](https://epilorenzofabbri.com). You can also find me on [Twitter](https://twitter.com/lorenzoF_SM), [Bluesky](https://bsky.app/profile/lorenzofepi.bsky.social), [Mastodon](https://fediscience.org/@lorenzoF), and [GitHub](https://github.com/lorenzoFabbri).

# Working Experience

```{r}
#| label: work_experience
#| output: asis

exp_raw <- rorcid::orcid_employments(orcid = my_orcid)
exp_ <- exp_raw$`0000-0003-3031-322X`$`affiliation-group`$summaries |>
  dplyr::bind_rows() |>
  tibble::as_tibble() |>
  janitor::clean_names() |>
  dplyr::mutate(
    employment_summary_end_date_year_value = tidyr::replace_na(
      employment_summary_end_date_year_value, "Present"
    ),
    location = paste0(
      employment_summary_organization_name,
      " (",
      employment_summary_organization_address_city,
      ", ",
      employment_summary_organization_address_country,
      ")"
    ),
    dates = paste0(
      employment_summary_start_date_year_value,
      " - ",
      employment_summary_end_date_year_value
    ),
    details = ""
  ) |>
  cvevents(
    what = "employment_summary_role_title",
    when = "dates",
    where = "location",
    details = "details"
  )
```

# Funding

```{r}
#| label: funding
#| output: asis

funds_raw <- rorcid::orcid_fundings(orcid = my_orcid)
funds <- funds_raw$`0000-0003-3031-322X`$group$`funding-summary` |>
  dplyr::bind_rows() |>
  tibble::as_tibble() |>
  janitor::clean_names() |>
  dplyr::mutate(
    location = paste0(
      organization_name,
      " (",
      organization_address_city,
      ", ",
      organization_address_country,
      ")"
    )
  ) |>
  cvshortevents(
    what = "title_title_value",
    when = "start_date_year_value",
    where = "location"
  )
```

# Honors and Awards

```{r}
#| label: honors
#| output: asis

honors_raw <- rorcid::orcid_distinctions(orcid = my_orcid)
honors <- honors_raw$`0000-0003-3031-322X`$`affiliation-group`$summaries |>
  dplyr::bind_rows() |>
  tibble::as_tibble() |>
  janitor::clean_names() |>
  cvshortevents(
    what = "distinction_summary_role_title",
    when = "distinction_summary_start_date_year_value",
    where = "distinction_summary_organization_name"
  )
```

# Publications

---
nocite: |
  @*
---

::: {#refs}
:::

# Conference Presentations

```{r}
#| label: posters
#| output: asis

conf_raw <- rorcid::works(x = my_orcid)
conf <- conf_raw |>
  tibble::as_tibble() |>
  janitor::clean_names() |>
  dplyr::filter(type == "conference-poster") |>
  dplyr::mutate(
    where = "",
    details = ""
  ) |>
  cvevents(
    what = "title_title_value",
    when = "publication_date_year_value",
    where = "location",
    details = "details"
  )
```

# Education

```{r}
#| label: education
#| output: asis

edu_raw <- rorcid::orcid_educations(orcid = my_orcid)
edu <- edu_raw$`0000-0003-3031-322X`$`affiliation-group`$summaries |>
  dplyr::bind_rows() |>
  tibble::as_tibble() |>
  janitor::clean_names() |>
  dplyr::mutate(
    education_summary_end_date_year_value = tidyr::replace_na(
      education_summary_end_date_year_value, "Present"
    ),
    location = paste0(
      education_summary_organization_name,
      " (",
      education_summary_organization_address_city,
      ", ",
      education_summary_organization_address_country,
      ")"
    ),
    dates = paste0(
      education_summary_start_date_year_value,
      " - ",
      education_summary_end_date_year_value
    ),
    details = ""
  ) |>
  cvevents(
    what = "education_summary_role_title",
    when = "dates",
    where = "location",
    details = "details"
  )
```

# Continuing Education

```{r}
#| label: cont_edu
#| output: asis
```

# Service

```{r}
#| label: service
#| output: asis

service_raw <- rorcid::orcid_services(orcid = my_orcid)
service <- service_raw$`0000-0003-3031-322X`$`affiliation-group` |>
  dplyr::bind_rows() |>
  tibble::as_tibble() |>
  tidyr::unnest(cols = "summaries") |>
  janitor::clean_names() |>
  dplyr::mutate(
    service_summary_end_date_year_value = tidyr::replace_na(
      service_summary_end_date_year_value, "Present"
    ),
    dates = paste0(
      service_summary_start_date_year_value,
      " - ",
      service_summary_end_date_year_value
    )
  ) |>
  cvshortevents(
    what = "service_summary_role_title",
    when = "dates",
    where = "service_summary_organization_name"
  )
```

# Skills

```{r}
#| label: skills
#| output: asis
```
