% https://github.com/schochastics/classic-cv

\usepackage[a4paper]{geometry}
\geometry{left=20mm, top=15mm}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[british]{babel}
\usepackage{csquotes}
\usepackage{changepage}
\usepackage{moresize}
\usepackage{fancyhdr}
\usepackage[colorlinks]{hyperref}
\usepackage{xifthen}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{array}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{float}
\floatplacement{table}{H}
\usepackage{tikz}
\usetikzlibrary{shapes, backgrounds, mindmap, trees}
\usepackage{color}
\definecolor{bgcol}{RGB}{110, 110, 110}
\definecolor{softcol}{RGB}{225, 225, 225}
\usepackage[backend=biber, maxnames=99, sorting=ydnt, sortlocale=en-GB]{biblatex}
%------------------------------------------------------------------------------%

% Macros to make my name bold in bibliography
\def\makenamesetup{
  \def\bibnamedelima{~}
  \def\bibnamedelimb{ }
  \def\bibnamedelimc{ }
  \def\bibnamedelimd{ }
  \def\bibnamedelimi{ }
  \def\bibinitperiod{.}
  \def\bibinitdelim{~}
  \def\bibinithyphendelim{.-}
}
\newcommand*{\makename}[2]{\begingroup\makenamesetup\xdef#1{#2}\endgroup}
\newcommand*{\boldname}[3]{
  \def\lastname{#1}
  \def\firstname{#2}
  \def\firstinit{#3}
}
\renewcommand{\mkbibnamegiven}[1]{
  \ifboolexpr{
    (test {\ifdefequal{\firstname}{\namepartgiven}} or
    test {\ifdefequal{\firstinit}{\namepartgiven}}) and
    test {\ifdefequal{\lastname}{\namepartfamily}}
  }
  {\mkbibbold{#1}}{#1}
}
\renewcommand{\mkbibnamefamily}[1]{
  \ifboolexpr{
    (test {\ifdefequal{\firstname}{\namepartgiven}} or
    test {\ifdefequal{\firstinit}{\namepartgiven}}) and
    test {\ifdefequal{\lastname}{\namepartfamily}}
  }
  {\mkbibbold{#1}}{#1}
}
%------------------------------------------------------------------------------%

\newlength{\spacebox}
\settowidth{\spacebox}{123456789}
\newcommand{\sepspace}{\vspace*{1em}}

\setlength{\parindent}{0mm}

\newcolumntype{x}[1]{%
>{\raggedleft\hspace{0pt}}p{#1}}%

\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\renewcommand{\thepage}{}
\renewcommand{\thesection}{}

% Title
\newcommand{\name}[1]{
  \Huge
  \begin{center} \textbf{#1} \end{center}\par
  \normalsize\normalfont
}
\newcommand{\updated}[1]{
  \large
  \begin{center} \textsl{#1} \end{center}\par
  \normalsize \normalfont
}

% Personal information below title
\newcommand{\info}[2]{
  \noindent\hangindent=2em\hangafter=0
  \parbox{\paperwidth}{
    \textsl{#1}
  }
  #2 \par
}

% Print when was the CV last updated
\newcommand{\updateinfo}[1][\today]{\par\vfill\hfill{\scriptsize\color{gray}Last updated on #1}}
%------------------------------------------------------------------------------%

% Custom section and meta-section
\newcommand{\cvsection}[1] {
  \begin{center}
    \large{\textbf{#1}}
  \end{center}
}

\newcommand{\metasection}[2] {
  \footnotesize{#2} \hspace*{\fill} \footnotesize{#1}\\[1pt]
}
%------------------------------------------------------------------------------%

% CV event
% param 1: event time
% param 2: event name
% param 3: institution
% param 4: list of paragraphs
\newcommand{\cvevent}[4] {
	\begin{tabular*}{1\textwidth}{p{13.6cm}x{3.9cm}}
		\textbf{#2}\\
		\textcolor{bgcol}{#3} & \vspace{2.5pt}\textcolor{bgcol}{#1}
	\end{tabular*}
	\vspace{-2pt}
	\textcolor{softcol}{\hrule}
	\vspace{6pt}
	\begin{adjustwidth}{2.5em}{0pt}
  	\foreach \desc in {#4}{
  			- \desc\\[3pt]
  	}
	\end{adjustwidth}
	\vspace{3pt}
}
%------------------------------------------------------------------------------%

% CV short event
% param 1: event time
% param 2: event name
% param 3: institution
\newcommand{\cvshortevent}[3] {
	\begin{tabular*}{1\textwidth}{p{13.6cm}x{3.9cm}}
		\textbf{#2}\\
		\textcolor{bgcol}{#3} & \vspace{2.5pt}\textcolor{bgcol}{#1}
	\end{tabular*}
	\vspace{3pt}
}
%------------------------------------------------------------------------------%
